
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beonse2.domain.mate.board.mapper.MateBoardMapper">

    <insert id="saveMateBoard" parameterType="com.beonse2.domain.mate.board.vo.MateBoardVO">
        INSERT INTO mateboard(mbid, member_id, title, content, created_at, modified_at)
        VALUES (mateBoard_seq.NEXTVAL, 1, #{title}, #{content}, SYSTIMESTAMP, SYSTIMESTAMP)
    </insert>

    <select id="findAll" resultType="List<com.beonse2.domain.mate.board.dto.MateBoardListResponseDTO>">
        SELECT b.mbid, m.nickname, m.payment_amount, b.title, b.modefied_at
        FROM mateboard b JOIN member m
        ON b.member_id = m.mid
    </select>
    this.mbid = mbid;
    this.profileImage = profileImage;
    this.nickname = nickname;
    this.paymentAmount = paymentAmount;
    this.title = title;
    this.content = content;
    this.createdAt = createdAt;
    this.modifiedAt = modifiedAt;
    <select id="findById" resultType="com.beonse2.domain.mate.board.dto.MateBoardResponseDTO" parameterType="int">
        SELECT b.mbid, m.image profileImage, m.nickname, m.payment_amount, b.title, b.content, b.created_at, b.modefied_at
        FROM mateboard b JOIN member m
        ON b.member_id = m.mid
        WHERE b.mbid = #{mbid}
    </select>

</mapper>